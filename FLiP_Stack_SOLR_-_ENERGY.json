{"flowContents":{"identifier":"30e63551-e8e5-3d04-b40f-705e45f43793","name":"FLiP Stack SOLR - ENERGY","comments":"","position":{"x":-360.0,"y":344.0},"processGroups":[],"remoteProcessGroups":[],"processors":[{"identifier":"d61f3352-ddc9-3ce1-a6a2-2be728374d2d","name":"ConsumePulsar Energy","comments":"","position":{"x":824.0,"y":440.0},"bundle":{"group":"org.apache.nifi","artifact":"nifi-pulsar-nar","version":"1.11.0"},"style":{},"type":"org.apache.nifi.processors.pulsar.pubsub.ConsumePulsar","properties":{"MAX_ASYNC_REQUESTS":"50","PULSAR_CLIENT_SERVICE":"eafd0668-2a75-3233-9773-f40dac2dcdbe","SUBSCRIPTION_NAME":"nifi-pulsar-energy","ACK_TIMEOUT":"30 sec","MESSAGE_DEMARCATOR":"\n","PRIORITY_LEVEL":"5","ASYNC_ENABLED":"true","CONSUMER_BATCH_SIZE":"1000","TOPICS":"persistent://public/default/energy","RECEIVER_QUEUE_SIZE":"1000","SUBSCRIPTION_TYPE":"Shared","MAPPED_FLOWFILE_ATTRIBUTES":"","TOPICS_PATTERN":null,"CONSUMER_NAME":"nifi-nrg-consumer-001"},"propertyDescriptors":{"MAX_ASYNC_REQUESTS":{"name":"MAX_ASYNC_REQUESTS","displayName":"Maximum Async Requests","identifiesControllerService":false,"sensitive":false},"PULSAR_CLIENT_SERVICE":{"name":"PULSAR_CLIENT_SERVICE","displayName":"Pulsar Client Service","identifiesControllerService":true,"sensitive":false},"SUBSCRIPTION_NAME":{"name":"SUBSCRIPTION_NAME","displayName":"Subscription Name","identifiesControllerService":false,"sensitive":false},"ACK_TIMEOUT":{"name":"ACK_TIMEOUT","displayName":"Acknowledgment Timeout","identifiesControllerService":false,"sensitive":false},"MESSAGE_DEMARCATOR":{"name":"MESSAGE_DEMARCATOR","displayName":"Message Demarcator","identifiesControllerService":false,"sensitive":false},"PRIORITY_LEVEL":{"name":"PRIORITY_LEVEL","displayName":"Consumer Priority Level","identifiesControllerService":false,"sensitive":false},"ASYNC_ENABLED":{"name":"ASYNC_ENABLED","displayName":"Async Enabled","identifiesControllerService":false,"sensitive":false},"CONSUMER_BATCH_SIZE":{"name":"CONSUMER_BATCH_SIZE","displayName":"Consumer Message Batch Size","identifiesControllerService":false,"sensitive":false},"TOPICS":{"name":"TOPICS","displayName":"Topic Names","identifiesControllerService":false,"sensitive":false},"RECEIVER_QUEUE_SIZE":{"name":"RECEIVER_QUEUE_SIZE","displayName":"Consumer Receiver Queue Size","identifiesControllerService":false,"sensitive":false},"SUBSCRIPTION_TYPE":{"name":"SUBSCRIPTION_TYPE","displayName":"Subscription Type","identifiesControllerService":false,"sensitive":false},"MAPPED_FLOWFILE_ATTRIBUTES":{"name":"MAPPED_FLOWFILE_ATTRIBUTES","displayName":"Mapped FlowFile Attributes","identifiesControllerService":false,"sensitive":false},"TOPICS_PATTERN":{"name":"TOPICS_PATTERN","displayName":"Topics Pattern","identifiesControllerService":false,"sensitive":false},"CONSUMER_NAME":{"name":"CONSUMER_NAME","displayName":"Consumer Name","identifiesControllerService":false,"sensitive":false}},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":[],"scheduledState":"ENABLED","componentType":"PROCESSOR","groupIdentifier":"30e63551-e8e5-3d04-b40f-705e45f43793"},{"identifier":"dbc2108b-80b8-3df0-8761-eae0027e1de9","name":"RetryFlowFile","comments":"","position":{"x":1240.0,"y":1048.0},"bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"1.14.0"},"style":{},"type":"org.apache.nifi.processors.standard.RetryFlowFile","properties":{"penalize-retries":"true","maximum-retries":"3","Fail on Non-numerical Overwrite":"false","reuse-mode":"fail","retry-attribute":"flowfile.retries"},"propertyDescriptors":{"penalize-retries":{"name":"penalize-retries","displayName":"Penalize Retries","identifiesControllerService":false,"sensitive":false},"maximum-retries":{"name":"maximum-retries","displayName":"Maximum Retries","identifiesControllerService":false,"sensitive":false},"Fail on Non-numerical Overwrite":{"name":"Fail on Non-numerical Overwrite","displayName":"Fail on Non-numerical Overwrite","identifiesControllerService":false,"sensitive":false},"reuse-mode":{"name":"reuse-mode","displayName":"Reuse Mode","identifiesControllerService":false,"sensitive":false},"retry-attribute":{"name":"retry-attribute","displayName":"Retry Attribute","identifiesControllerService":false,"sensitive":false}},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":[],"scheduledState":"ENABLED","componentType":"PROCESSOR","groupIdentifier":"30e63551-e8e5-3d04-b40f-705e45f43793"},{"identifier":"c69f4eb3-ea9b-343a-b0bf-37ddac000602","name":"Send to Apache SOLR energy collection","comments":"","position":{"x":816.0,"y":848.0},"bundle":{"group":"org.apache.nifi","artifact":"nifi-solr-nar","version":"1.14.0"},"style":{},"type":"org.apache.nifi.processors.solr.PutSolrRecord","properties":{"Solr Update Path":"/update","Solr Socket Timeout":"10 seconds","ZooKeeper Connection Timeout":"10 seconds","kerberos-principal":null,"Solr Maximum Connections":"10","ZooKeeper Client Timeout":"10 seconds","Fields To Index":"current,voltage,power,total,diskusage,cpu,systemtime,uuid,memory,macaddress,dev_name,day1","kerberos-credentials-service":null,"SSL Context Service":null,"Solr Maximum Connections Per Host":"5","Username":null,"Batch Size":"500","Solr Connection Timeout":"10 seconds","Collection":"energy","Solr Location":"http://localhost:8983/solr/energy","Solr Type":"Standard","put-solr-record-record-reader":"6509aac6-1735-3ac5-9910-aec3b916807c","Commit Within":"5000"},"propertyDescriptors":{"Solr Update Path":{"name":"Solr Update Path","displayName":"Solr Update Path","identifiesControllerService":false,"sensitive":false},"kerberos-password":{"name":"kerberos-password","displayName":"Kerberos Password","identifiesControllerService":false,"sensitive":true},"Solr Socket Timeout":{"name":"Solr Socket Timeout","displayName":"Solr Socket Timeout","identifiesControllerService":false,"sensitive":false},"ZooKeeper Connection Timeout":{"name":"ZooKeeper Connection Timeout","displayName":"ZooKeeper Connection Timeout","identifiesControllerService":false,"sensitive":false},"kerberos-principal":{"name":"kerberos-principal","displayName":"Kerberos Principal","identifiesControllerService":false,"sensitive":false},"Solr Maximum Connections":{"name":"Solr Maximum Connections","displayName":"Solr Maximum Connections","identifiesControllerService":false,"sensitive":false},"ZooKeeper Client Timeout":{"name":"ZooKeeper Client Timeout","displayName":"ZooKeeper Client Timeout","identifiesControllerService":false,"sensitive":false},"Fields To Index":{"name":"Fields To Index","displayName":"Fields To Index","identifiesControllerService":false,"sensitive":false},"kerberos-credentials-service":{"name":"kerberos-credentials-service","displayName":"Kerberos Credentials Service","identifiesControllerService":true,"sensitive":false},"SSL Context Service":{"name":"SSL Context Service","displayName":"SSL Context Service","identifiesControllerService":true,"sensitive":false},"Solr Maximum Connections Per Host":{"name":"Solr Maximum Connections Per Host","displayName":"Solr Maximum Connections Per Host","identifiesControllerService":false,"sensitive":false},"Username":{"name":"Username","displayName":"Basic Auth Username","identifiesControllerService":false,"sensitive":false},"Batch Size":{"name":"Batch Size","displayName":"Batch Size","identifiesControllerService":false,"sensitive":false},"Solr Connection Timeout":{"name":"Solr Connection Timeout","displayName":"Solr Connection Timeout","identifiesControllerService":false,"sensitive":false},"Collection":{"name":"Collection","displayName":"Collection","identifiesControllerService":false,"sensitive":false},"Solr Location":{"name":"Solr Location","displayName":"Solr Location","identifiesControllerService":false,"sensitive":false},"Solr Type":{"name":"Solr Type","displayName":"Solr Type","identifiesControllerService":false,"sensitive":false},"put-solr-record-record-reader":{"name":"put-solr-record-record-reader","displayName":"Record Reader","identifiesControllerService":true,"sensitive":false},"Commit Within":{"name":"Commit Within","displayName":"Commit Within","identifiesControllerService":false,"sensitive":false},"Password":{"name":"Password","displayName":"Basic Auth Password","identifiesControllerService":false,"sensitive":true}},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":[],"scheduledState":"ENABLED","componentType":"PROCESSOR","groupIdentifier":"30e63551-e8e5-3d04-b40f-705e45f43793"},{"identifier":"8cc5bc0f-f0ce-3fd7-852d-d3e97c1612b5","name":"Queries on Voltage","comments":"","position":{"x":832.0,"y":640.0},"bundle":{"group":"org.apache.nifi","artifact":"nifi-standard-nar","version":"1.14.0"},"style":{},"type":"org.apache.nifi.processors.standard.QueryRecord","properties":{"all":"SELECT * FROM FLOWFILE","cache-schema":"true","dbf-default-precision":"10","alert":"SELECT voltage, uuid, current_consumption, devicetime, systemtime, diskusage \nFROM FLOWFILE\nWHERE CAST(voltage AS FLOAT) > 117","record-writer":"c11fcf19-4079-3b64-bf08-81a6166f27e9","record-reader":"6509aac6-1735-3ac5-9910-aec3b916807c","include-zero-record-flowfiles":"true","dbf-default-scale":"0"},"propertyDescriptors":{"all":{"name":"all","displayName":"all","identifiesControllerService":false,"sensitive":false},"cache-schema":{"name":"cache-schema","displayName":"Cache Schema","identifiesControllerService":false,"sensitive":false},"dbf-default-precision":{"name":"dbf-default-precision","displayName":"Default Decimal Precision","identifiesControllerService":false,"sensitive":false},"alert":{"name":"alert","displayName":"alert","identifiesControllerService":false,"sensitive":false},"record-writer":{"name":"record-writer","displayName":"Record Writer","identifiesControllerService":true,"sensitive":false},"record-reader":{"name":"record-reader","displayName":"Record Reader","identifiesControllerService":true,"sensitive":false},"include-zero-record-flowfiles":{"name":"include-zero-record-flowfiles","displayName":"Include Zero Record FlowFiles","identifiesControllerService":false,"sensitive":false},"dbf-default-scale":{"name":"dbf-default-scale","displayName":"Default Decimal Scale","identifiesControllerService":false,"sensitive":false}},"schedulingPeriod":"0 sec","schedulingStrategy":"TIMER_DRIVEN","executionNode":"ALL","penaltyDuration":"30 sec","yieldDuration":"1 sec","bulletinLevel":"WARN","runDurationMillis":0,"concurrentlySchedulableTaskCount":1,"autoTerminatedRelationships":["original"],"scheduledState":"ENABLED","componentType":"PROCESSOR","groupIdentifier":"30e63551-e8e5-3d04-b40f-705e45f43793"}],"inputPorts":[],"outputPorts":[{"identifier":"01512374-175c-3bca-92cf-6598c7f971e4","name":"Errors","comments":"","position":{"x":1480.0,"y":688.0},"type":"OUTPUT_PORT","concurrentlySchedulableTaskCount":1,"allowRemoteAccess":false,"componentType":"OUTPUT_PORT","groupIdentifier":"30e63551-e8e5-3d04-b40f-705e45f43793"},{"identifier":"0d222e56-ccb9-357f-a51a-eceb6982a836","name":"Sent Messages","comments":"","position":{"x":616.0,"y":1056.0},"type":"OUTPUT_PORT","concurrentlySchedulableTaskCount":1,"allowRemoteAccess":false,"componentType":"OUTPUT_PORT","groupIdentifier":"30e63551-e8e5-3d04-b40f-705e45f43793"}],"connections":[{"identifier":"28c3d0dd-5801-3e43-9858-bbea7e74980d","name":"","source":{"id":"8cc5bc0f-f0ce-3fd7-852d-d3e97c1612b5","type":"PROCESSOR","groupId":"30e63551-e8e5-3d04-b40f-705e45f43793","name":"Queries on Voltage","comments":""},"destination":{"id":"01512374-175c-3bca-92cf-6598c7f971e4","type":"OUTPUT_PORT","groupId":"30e63551-e8e5-3d04-b40f-705e45f43793","name":"Errors","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["alert","failure"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"30e63551-e8e5-3d04-b40f-705e45f43793"},{"identifier":"20272dac-aea5-3573-a2f7-f9fb08e0f00b","name":"","source":{"id":"c69f4eb3-ea9b-343a-b0bf-37ddac000602","type":"PROCESSOR","groupId":"30e63551-e8e5-3d04-b40f-705e45f43793","name":"Send to Apache SOLR energy collection","comments":""},"destination":{"id":"dbc2108b-80b8-3df0-8761-eae0027e1de9","type":"PROCESSOR","groupId":"30e63551-e8e5-3d04-b40f-705e45f43793","name":"RetryFlowFile","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["connection_failure","failure"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"30e63551-e8e5-3d04-b40f-705e45f43793"},{"identifier":"23c4fbb0-e33f-3e3d-9e25-33498554a098","name":"","source":{"id":"8cc5bc0f-f0ce-3fd7-852d-d3e97c1612b5","type":"PROCESSOR","groupId":"30e63551-e8e5-3d04-b40f-705e45f43793","name":"Queries on Voltage","comments":""},"destination":{"id":"c69f4eb3-ea9b-343a-b0bf-37ddac000602","type":"PROCESSOR","groupId":"30e63551-e8e5-3d04-b40f-705e45f43793","name":"Send to Apache SOLR energy collection","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["all"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"30e63551-e8e5-3d04-b40f-705e45f43793"},{"identifier":"e79d0281-837f-302b-9fb7-d3744938087d","name":"","source":{"id":"c69f4eb3-ea9b-343a-b0bf-37ddac000602","type":"PROCESSOR","groupId":"30e63551-e8e5-3d04-b40f-705e45f43793","name":"Send to Apache SOLR energy collection","comments":""},"destination":{"id":"0d222e56-ccb9-357f-a51a-eceb6982a836","type":"OUTPUT_PORT","groupId":"30e63551-e8e5-3d04-b40f-705e45f43793","name":"Sent Messages","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"30e63551-e8e5-3d04-b40f-705e45f43793"},{"identifier":"8ad9cc80-1956-377a-9312-2ac94c3afa82","name":"","source":{"id":"dbc2108b-80b8-3df0-8761-eae0027e1de9","type":"PROCESSOR","groupId":"30e63551-e8e5-3d04-b40f-705e45f43793","name":"RetryFlowFile","comments":""},"destination":{"id":"c69f4eb3-ea9b-343a-b0bf-37ddac000602","type":"PROCESSOR","groupId":"30e63551-e8e5-3d04-b40f-705e45f43793","name":"Send to Apache SOLR energy collection","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["retry"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[{"x":1349.999999335545,"y":887.000011423587}],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"30e63551-e8e5-3d04-b40f-705e45f43793"},{"identifier":"8f57bb40-737b-3c81-be98-074e88570d81","name":"","source":{"id":"dbc2108b-80b8-3df0-8761-eae0027e1de9","type":"PROCESSOR","groupId":"30e63551-e8e5-3d04-b40f-705e45f43793","name":"RetryFlowFile","comments":""},"destination":{"id":"8341398f-a99c-3e56-8da0-5b124cf37481","type":"FUNNEL","groupId":"30e63551-e8e5-3d04-b40f-705e45f43793","name":"Funnel","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["retries_exceeded","failure"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"30e63551-e8e5-3d04-b40f-705e45f43793"},{"identifier":"d1fe9dfd-4a42-3c5a-8afa-94fc73aa2f2e","name":"","source":{"id":"d61f3352-ddc9-3ce1-a6a2-2be728374d2d","type":"PROCESSOR","groupId":"30e63551-e8e5-3d04-b40f-705e45f43793","name":"ConsumePulsar Energy","comments":""},"destination":{"id":"8cc5bc0f-f0ce-3fd7-852d-d3e97c1612b5","type":"PROCESSOR","groupId":"30e63551-e8e5-3d04-b40f-705e45f43793","name":"Queries on Voltage","comments":""},"labelIndex":1,"zIndex":0,"selectedRelationships":["success"],"backPressureObjectThreshold":10000,"backPressureDataSizeThreshold":"1 GB","flowFileExpiration":"0 sec","prioritizers":[],"bends":[],"loadBalanceStrategy":"DO_NOT_LOAD_BALANCE","partitioningAttribute":"","loadBalanceCompression":"DO_NOT_COMPRESS","componentType":"CONNECTION","groupIdentifier":"30e63551-e8e5-3d04-b40f-705e45f43793"}],"labels":[],"funnels":[{"identifier":"8341398f-a99c-3e56-8da0-5b124cf37481","position":{"x":1584.0,"y":856.0},"componentType":"FUNNEL","groupIdentifier":"30e63551-e8e5-3d04-b40f-705e45f43793"}],"controllerServices":[],"variables":{},"parameterContextName":"sensors","defaultFlowFileExpiration":"0 sec","defaultBackPressureObjectThreshold":100000,"defaultBackPressureDataSizeThreshold":"1 GB","flowFileConcurrency":"UNBOUNDED","flowFileOutboundPolicy":"STREAM_WHEN_AVAILABLE","componentType":"PROCESS_GROUP"},"externalControllerServices":{"6509aac6-1735-3ac5-9910-aec3b916807c":{"identifier":"6509aac6-1735-3ac5-9910-aec3b916807c","name":"CDP Infer JsonTreeReader"},"c11fcf19-4079-3b64-bf08-81a6166f27e9":{"identifier":"c11fcf19-4079-3b64-bf08-81a6166f27e9","name":"Standard Inherit JsonRecordSetWriter"},"eafd0668-2a75-3233-9773-f40dac2dcdbe":{"identifier":"eafd0668-2a75-3233-9773-f40dac2dcdbe","name":"Local Standalone Pulsar"}},"parameterContexts":{"sensors":{"name":"sensors","parameters":[{"name":"kafkabrokers","description":"","sensitive":false,"value":"edge2ai-1.dim.local:9092"},{"name":"Database Driver Class Name","description":"","sensitive":false,"value":"org.postgresql.Driver"},{"name":"Database Driver Location","description":"","sensitive":false,"value":"/Users/tspann/Documents/servers/nifi-1.14.0/logs/postgresql-42.2.23.jar"},{"name":"Database Password","description":"","sensitive":true},{"name":"energytopic","description":"","sensitive":false,"value":"energy"},{"name":"Database User","description":"","sensitive":false,"value":"hqcpwqca"},{"name":"trendingtemperaturequery","description":"","sensitive":false,"value":"SELECT * \nFROM FLOWFILE\nWHERE CAST(temperaturef as FLOAT) > 60\n"},{"name":"scadaclientid","description":"","sensitive":false,"value":"nifi-scada-data-remote"},{"name":"allquery","description":"","sensitive":false,"value":"SELECT *\nFROM FLOWFILE"},{"name":"scadatopic","description":"","sensitive":false,"value":"scada"},{"name":"Kudu Masters","description":"","sensitive":false,"value":"edge2ai-1.dim.local:7051"},{"name":"Database Connection URL","description":"","sensitive":false,"value":"jdbc:postgresql://stampy.db.elephantsql.com:5432/hqcpwqca"},{"name":"global_temperaturealerttopic","description":"","sensitive":false,"value":"global_temperaturealert"},{"name":"sensordataclientid","description":"","sensitive":false,"value":"nifi-sensor-data-local"},{"name":"tempquery","description":"","sensitive":false,"value":"SELECT * \nFROM FLOWFILE\nWHERE CAST(temperaturef as FLOAT) > 70\n"}]}},"flowEncodingVersion":"1.0"}